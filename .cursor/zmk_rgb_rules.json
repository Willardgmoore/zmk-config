{
    "name": "ZMK RGB Configuration Rules",
    "version": "1.0.0",
    "description": "Rules for ZMK RGB LED configuration based on official documentation",
    "rules": [
        {
            "pattern": "\\.keymap$",
            "checks": [
                {
                    "type": "required_includes",
                    "value": [
                        "#include <dt-bindings/zmk/rgb.h>",
                        "#include <dt-bindings/led/led.h>"
                    ],
                    "message": "Required RGB header files must be included"
                },
                {
                    "type": "node_exists",
                    "path": "/",
                    "node": "chosen",
                    "message": "Must define chosen node for LED configuration"
                }
            ]
        },
        {
            "pattern": "(.+\\.keymap|\\.conf)$",
            "checks": [
                {
                    "type": "config_options",
                    "required": [
                        "CONFIG_ZMK_RGB_UNDERGLOW=y",
                        "CONFIG_WS2812_STRIP=y"
                    ],
                    "message": "Required RGB configuration options must be set"
                }
            ]
        },
        {
            "pattern": "\\.keymap$",
            "checks": [
                {
                    "type": "rgb_node_structure",
                    "required_properties": [
                        "chain-length",
                        "led-strip",
                        "chain-length",
                        "color-mapping"
                    ],
                    "message": "RGB node must contain all required properties for LED configuration"
                },
                {
                    "type": "behavior_definition",
                    "pattern": "rgb_ug|rgb_key",
                    "required_properties": [
                        "compatible",
                        "#binding-cells",
                        "bindings"
                    ],
                    "message": "RGB behavior definitions must follow ZMK standards"
                }
            ]
        },
        {
            "pattern": "glove80\\.conf$",
            "checks": [
                {
                    "type": "config_values",
                    "settings": {
                        "CONFIG_ZMK_RGB_UNDERGLOW_HUE_START": "160",
                        "CONFIG_ZMK_RGB_UNDERGLOW_SAT_START": "100",
                        "CONFIG_ZMK_RGB_UNDERGLOW_BRT_START": "100",
                        "CONFIG_ZMK_RGB_UNDERGLOW_EFF_START": "0",
                        "CONFIG_ZMK_RGB_UNDERGLOW_SPD_START": "3"
                    },
                    "message": "RGB configuration values must be properly set for Glove80"
                }
            ]
        }
    ],
    "recommended_structure": {
        "rgb_underglow": {
            "compatible": "zmk,rgb-underglow",
            "chain-length": "<number_of_leds>",
            "led-strip": "ws2812",
            "color-mapping": "RGB"
        },
        "behaviors": {
            "rgb_key": {
                "compatible": "zmk,behavior-rgb-underglow",
                "#binding-cells": "<number>",
                "led-index": "<index>",
                "default-color": "<color_hex>"
            }
        }
    },
    "settings": {
        "indent_style": "space",
        "indent_size": 4,
        "end_of_line": "lf",
        "charset": "utf-8",
        "trim_trailing_whitespace": true,
        "insert_final_newline": true
    }
} 