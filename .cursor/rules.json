{
    "name": "Glove80 ZMK Keymap Rules",
    "rules": [
        {
            "pattern": "\\.keymap$",
            "checks": [
                {
                    "type": "required_includes",
                    "value": [
                        "#include <behaviors.dtsi>",
                        "#include <dt-bindings/zmk/keys.h>",
                        "#include <dt-bindings/zmk/bt.h>",
                        "#include <dt-bindings/zmk/outputs.h>"
                    ],
                    "message": "Required ZMK header files must be included"
                },
                {
                    "type": "regex",
                    "pattern": "^\\s*#define\\s+[A-Z_]+\\s+\\d+\\s*$",
                    "message": "Layer definitions should be in uppercase with numeric values"
                },
                {
                    "type": "regex",
                    "pattern": "compatible\\s*=\\s*\"zmk,keymap\"",
                    "message": "Keymap must declare ZMK compatibility"
                },
                {
                    "type": "regex",
                    "pattern": "\\s*bindings\\s*=\\s*<[^>]+>;\\s*$",
                    "message": "Layer bindings must be properly formatted with angle brackets"
                }
            ]
        },
        {
            "pattern": "behaviors\\.dtsi$",
            "checks": [
                {
                    "type": "regex",
                    "pattern": "compatible\\s*=\\s*\"zmk,behavior-[\\w-]+\"",
                    "message": "Behavior definitions must specify ZMK compatibility"
                }
            ]
        },
        {
            "pattern": "\\.(keymap|dtsi)$",
            "checks": [
                {
                    "type": "line_length",
                    "max_length": 180,
                    "message": "Lines should not exceed 180 characters for readability"
                },
                {
                    "type": "regex",
                    "pattern": "&[\\w_]+\\s+",
                    "message": "Key bindings should start with & and use proper ZMK key codes"
                },
                {
                    "type": "regex",
                    "pattern": "/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/",
                    "message": "Multi-line comments should use proper C-style format"
                }
            ]
        },
        {
            "pattern": "\\.conf$",
            "checks": [
                {
                    "type": "regex",
                    "pattern": "^CONFIG_[A-Z0-9_]+=",
                    "message": "ZMK configuration options must start with CONFIG_ and use uppercase"
                }
            ]
        }
    ],
    "settings": {
        "indent_style": "space",
        "indent_size": 4,
        "end_of_line": "lf",
        "charset": "utf-8",
        "trim_trailing_whitespace": true,
        "insert_final_newline": true
    }
} 